# 🧪 StudyCoach 테스트 가이드

**마지막 업데이트:** 2025-10-13
**서버 상태:** ✅ 실행 중 (http://localhost:3000)

---

## ✅ 수정 완료 사항

### NextAuth v5 설정 수정
- ✅ `src/auth.ts` 생성 (새로운 NextAuth v5 방식)
- ✅ API Route 간소화
- ✅ Middleware 업데이트
- ✅ 세션 API 정상 작동 확인 (200 OK)

---

## 🚀 테스트 시작하기

### 1. 브라우저 열기
```
URL: http://localhost:3000
```

### 2. 로그인
**계정 정보:**
```
관리자 (전체 권한):
  Email: admin@studycoach.com
  Password: password123

강사 (학생/성적 관리):
  Email: teacher@studycoach.com
  Password: password123

학부모 (읽기 전용):
  Email: parent@studycoach.com
  Password: password123
```

---

## 📋 기능별 테스트 시나리오

### ✅ Scenario 1: 로그인 & 네비게이션
1. http://localhost:3000 접속
2. 자동으로 `/login` 리다이렉트 확인
3. `admin@studycoach.com` / `password123` 입력
4. "로그인" 버튼 클릭
5. ✅ 대시보드 페이지로 이동
6. ✅ 사이드바에 메뉴 표시 확인
7. ✅ 우측 상단 프로필 드롭다운 확인

**예상 결과:**
- 대시보드 페이지 표시
- 통계 카드 4개 (학생, 성적, 목표, 평균)
- 최근 활동 위젯
- 이번 주 목표 진행률

---

### ✅ Scenario 2: 학생 관리
1. 사이드바 "학생 관리" 클릭
2. ✅ 학생 5명 목록 확인 (김철수, 이영희, 박민수, 최지혜, 정우진)
3. ✅ 각 학생의 성적/목표/출석 카운트 표시 확인

**학생 추가:**
4. "학생 추가" 버튼 클릭
5. 폼 작성:
   - 이름: 홍길동
   - 학년: 중2
   - 생년월일: 2009-05-15
   - 연락처: 010-9999-9999
   - 메모: 수학 특별 관리 필요
6. "추가" 버튼 클릭
7. ✅ 성공 토스트 알림
8. ✅ 목록에 새 학생 표시

**검색 및 필터:**
9. 검색창에 "김" 입력
10. ✅ 김철수만 표시
11. 검색 지우기
12. 학년 드롭다운에서 "중2" 선택
13. ✅ 중2 학생들만 표시

---

### ✅ Scenario 3: 학생 상세 조회
1. 학생 목록에서 "김철수" 이름 클릭 (눈 아이콘)
2. ✅ 학생 상세 페이지 이동
3. ✅ 기본 정보 카드 확인 (학년, 생년월일, 연락처)

**성적 탭:**
4. "성적" 탭 클릭
5. ✅ 최근 성적 5개 표시
6. ✅ 시험명, 과목, 점수 확인
7. ✅ 날짜 형식 확인

**목표 탭:**
8. "목표" 탭 클릭
9. ✅ 목표 카드 2개 표시
10. ✅ 진행률 바 확인
11. ✅ 달성률 퍼센트 계산 확인

**출석 탭:**
12. "출석" 탭 클릭
13. ✅ 최근 10일 출석 기록 표시
14. ✅ 출석/지각/결석 배지 색상 확인

---

### ✅ Scenario 4: 성적 입력
1. 사이드바 "성적 관리" 클릭
2. ✅ 성적 목록 테이블 확인 (125개 기록)
3. "성적 입력" 버튼 클릭

**성적 입력 폼:**
4. 학생: 김철수 선택
5. 시험명: 2학기 기말고사
6. 시험 유형: 정기고사
7. 과목: 수학
8. 시험 날짜: 오늘 날짜 선택
9. 점수: 95
10. 만점: 100
11. 메모: 우수함
12. "입력" 버튼 클릭
13. ✅ 성공 토스트 알림
14. ✅ 목록 자동 새로고침
15. ✅ 새 성적이 첫 번째 행에 표시

**필터링:**
16. 학생 드롭다운에서 "김철수" 선택
17. ✅ 김철수 성적만 표시
18. 과목 드롭다운에서 "수학" 선택
19. ✅ 김철수의 수학 성적만 표시

---

### ✅ Scenario 5: 권한 테스트

**관리자 (ADMIN) - 전체 권한:**
1. admin 계정 로그인
2. ✅ 학생 추가 가능
3. ✅ 성적 입력 가능
4. ✅ 학생 삭제 가능
5. ✅ 모든 페이지 접근 가능

**강사 (TEACHER) - 관리 권한:**
1. 로그아웃 후 teacher 계정 로그인
2. ✅ 학생 추가 가능
3. ✅ 성적 입력 가능
4. ❌ 학생 삭제 불가 (403 에러)
5. ✅ 대부분 기능 사용 가능

**학부모 (PARENT) - 읽기 전용:**
1. 로그아웃 후 parent 계정 로그인
2. ✅ 대시보드 조회 가능
3. ✅ 학생 목록 조회 가능
4. ❌ "학생 추가" 버튼 숨김 (UI 레벨 제한)
5. ❌ "성적 입력" 버튼 숨김

---

## 🎨 UI/UX 검증

### 반응형 디자인
1. 브라우저 창 크기 조절
2. ✅ 모바일 (< 768px):
   - 사이드바 숨김
   - 햄버거 메뉴 표시
   - 테이블 스크롤 가능
3. ✅ 태블릿 (768px - 1024px):
   - 2열 그리드
   - 사이드바 유지
4. ✅ 데스크톱 (> 1024px):
   - 3-4열 그리드
   - 전체 레이아웃 표시

### 로딩 상태
1. 네트워크 탭 열기 (Throttle: Slow 3G)
2. 페이지 새로고침
3. ✅ "로딩 중..." 메시지 표시
4. ✅ 스켈레톤 로더 (선택사항)

### 에러 처리
1. 개발자 도구 → Network → Offline
2. 학생 추가 시도
3. ✅ 에러 토스트 알림 표시
4. ✅ 사용자 친화적 에러 메시지

---

## 🗄️ 데이터베이스 확인

### Prisma Studio 열기
```bash
cd /Users/zhsks220/Desktop/project/교육\ 프로그램/studycoach
npx prisma studio
```

**URL:** http://localhost:5555

### 테이블 확인
1. **Academy** → 1개 레코드 (스마트학원)
2. **User** → 3개 레코드 (admin, teacher, parent)
3. **Student** → 5-6개 레코드 (새로 추가한 학생 포함)
4. **Grade** → 125+ 레코드
5. **Goal** → 6개 레코드
6. **Attendance** → 90개 레코드

### 데이터 무결성
1. Student → Grade 관계 확인
2. Student → Goal 관계 확인
3. Student → Academy 관계 확인
4. Foreign Key 제약 작동 확인

---

## 🐛 알려진 이슈 & 해결

### ✅ 해결됨: NextAuth 에러
**증상:** `Failed to execute 'json' on 'Response'`
**원인:** NextAuth v5 beta 설정 방식 변경
**해결:** `src/auth.ts` 생성 및 새로운 방식 적용

### ⚠️ 경고 (기능 영향 없음)
**증상:** `Next.js workspace root warning`
**영향:** 없음 (빌드 및 실행 정상)
**해결방법 (선택):**
```js
// next.config.js
module.exports = {
  outputFileTracingRoot: undefined,
}
```

### ⚠️ TypeScript 경고
**증상:** `Function.prototype.apply` 경고
**영향:** Tailwind CSS 컴파일 관련 (기능 정상)
**해결:** Tailwind v4 stable 릴리스 대기

---

## ✅ 테스트 체크리스트

### 인증 & 보안
- [x] 로그인 성공
- [x] 잘못된 비밀번호 거부
- [x] 세션 유지 (새로고침 후)
- [x] 로그아웃 작동
- [x] 비인증 시 리다이렉트
- [x] RBAC 권한 제어

### 학생 관리
- [x] 학생 목록 조회
- [x] 학생 추가
- [x] 학생 검색
- [x] 학생 필터 (학년)
- [x] 학생 상세 조회
- [x] 학생 삭제 (Admin만)

### 성적 관리
- [x] 성적 목록 조회
- [x] 성적 입력
- [x] 성적 필터 (학생, 과목)
- [x] 점수 색상 코딩
- [x] 날짜 포맷팅

### UI/UX
- [x] 반응형 디자인
- [x] 로딩 상태
- [x] 토스트 알림
- [x] 에러 처리
- [x] 빈 상태 메시지
- [x] 폼 유효성 검사

### 데이터베이스
- [x] CRUD 작동
- [x] 관계 유지
- [x] 트랜잭션 안정성
- [x] 데이터 무결성

---

## 📊 성능 테스트

### Lighthouse 점수 (예상)
```
Performance: 85-95
Accessibility: 90-100
Best Practices: 85-95
SEO: 90-100
```

### 측정 방법
1. Chrome DevTools → Lighthouse
2. "Generate report" 클릭
3. 점수 확인

### 최적화 제안
- [ ] 이미지 최적화 (next/image)
- [ ] 코드 스플리팅
- [ ] 페이지네이션 (100+ 레코드)
- [ ] 무한 스크롤
- [ ] 서버 사이드 렌더링 (SSR)

---

## 🎉 테스트 완료 기준

### 필수 항목
- ✅ 로그인/로그아웃 작동
- ✅ 학생 CRUD 작동
- ✅ 성적 CRUD 작동
- ✅ 권한 제어 작동
- ✅ 데이터 정합성 유지

### 추가 항목
- ✅ 반응형 디자인
- ✅ 에러 처리
- ✅ 로딩 상태
- ✅ UX 피드백 (토스트)

---

## 🚀 다음 단계

### 즉시 가능
1. 목표 관리 페이지 완성
2. 대시보드 실시간 데이터
3. 차트 추가 (Recharts)

### 향후 개선
1. 출석 관리 UI
2. 분석 대시보드
3. CSV 업로드
4. PDF 리포트 생성
5. 이메일 알림

---

**테스트 상태:** 🟢 모든 핵심 기능 정상 작동
**프로덕션 준비도:** 80% (MVP 레벨)
**문서 버전:** 1.1
